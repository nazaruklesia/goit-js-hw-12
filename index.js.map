{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n// import iziToast from \"izitoast\";\nexport { getPictures, addPages, resetPage };\n\nlet page = 1;\nconst perPage = 15;\n\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"47376974-17318822de3408abf70e5a971\";\n\n\n async function getPictures(query) {\n        const response = await axios(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                page,\n                per_page: perPage,\n            },\n        });\n        return response.data;\n        \n    \n    // catch (error) {\n    //     iziToast.error({\n    //         title: \"Error\",\n    // message: \"Something went wrong. Please try again later!\",\n    // position: \"topRight\",\n    //     })\n       \n    // }\n}\n\n async function addPages() {\n    page += 1;\n}\n\n async function resetPage() {\n    page = 1;\n}\n","export { reflectionPictures, clearGallery, hideLoader, showLoader };\n\nfunction reflectionPictures(pictures) {\n    return pictures.map(\n        ({ webformatURL, largeImageURL, tags,\n            likes, views, comments, downloads }) => `\n   <a class=\"gallery-item\" href=\"${largeImageURL}\">\n   <div class=all-gallary>\n   <img src=\"${webformatURL}\" alt=\"${tags}\">\n   <div class=\"description\">\n   <p>Likes: <span>\"${likes}\"</span></p>\n   <p>Views: <span>\"${views}\"</span></p>\n   <p>Comments: <span>\"${comments}\"</span></p>\n   <p>Downloads: <span>\"${downloads}\"</span></p>\n   </div>\n   </div>\n   </a>\n    `).join(\"\");\n }\n\n\nfunction clearGallery(galleryElement) {\n    galleryElement.innerHTML = \"\";\n}\n \nfunction showLoader(loaderElement) {\n    loaderElement.style.display = \"block\";\n}\n\nfunction hideLoader(loaderElement) {\n    loaderElement.style.display = \"none\";\n}\n","import \"./css/styles.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport \"./js/pixabay-api.js\";\nimport { getPictures, addPages, resetPage } from \"./js/pixabay-api.js\";\n\nimport \"./js/render-functions.js\";\nimport { reflectionPictures, clearGallery, hideLoader, showLoader } from \"./js/render-functions.js\";\n\n\nconst formSearch = document.querySelector(\".form-search\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst btnLoadMore = document.querySelector(\".js-load-more\");\n\nformSearch.addEventListener(\"submit\", handlerSearch);\nbtnLoadMore.addEventListener(\"click\", addPages);\n\n\n\nlet lightbox = new SimpleLightbox(\".gallery-item\", {\n  captions: true,\n  captionSelector: \"img\",\n  captionType: \"attr\",\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\n\n\nformSearch.addEventListener(\"submit\", handlerSearch);\nbtnLoadMore.addEventListener(\"click\", handlerLoadMore);\n\nasync function handlerSearch(event) {\n    event.preventDefault();\n\n    const query = event.target.elements.query.value.trim();\n\n     if (!query) {\n    iziToast.error({\n      title: \"Error\",\n      message: \"Please enter a search query!\",\n      position: \"topRight\",\n    });\n       \n    return;\n     }\n    \n clearGallery(gallery);\n  showLoader(loader);\n    resetPage();\n    \n  try {\n    const data = await getPictures(query);\n      if (!data.hits.length) {\n          iziToast.info({\n              title: \"No Results\",\n              message: \"Sorry, there are no images matching your search query. Please try again!\",\n              position: \"topRight\",\n          });\n          return;\n  }\n   \n\n    gallery.innerHTML = reflectionPictures(data.hits);\n\n    lightbox.refresh();\n    btnLoadMore.style.display = \"block\";\n\n  } catch (error) { \n  iziToast.error({\n    title: \"Error\",\n    message: \"Something went wrong. Please try again later!\",\n    position: \"topRight\",\n  }); \n \n  } finally {\n      hideLoader(loader);\n  }\n\n} \n\n async function handlerLoadMore() {\n    try {\n        await addPages();\n\n        const query = formSearch.elements.query.value.trim();\n\n        if (!query) {\n            iziToast.error({\n                title: \"Error\",\n                message: \"Search query is empty!\",\n                position: \"topRight\",\n            });\n            return;\n        }\n\n        const data = await getPictures(query);\n\n        if (data.hits.length >= data.totalHits) {\n            btnLoadMore.style.display = \"none\";\n            iziToast.info({\n                message: \"You've reached the end of search results.\",\n                position: \"topRight\",\n            });\n            return;\n        }\n\n        gallery.insertAdjacentHTML(\"beforeend\", reflectionPictures(data.hits));\n        lightbox.refresh();\n\n        const cardHeight = gallery.firstElementChild.getBoundingClientRect().height;\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: \"smooth\",\n        });\n     } catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: \"Error fetching more images!\",\n            position: \"topRight\",\n        });\n    }\n    \n}\n\n\n\n\n"],"names":["page","perPage","BASE_URL","API_KEY","getPictures","query","axios","addPages","resetPage","reflectionPictures","pictures","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","galleryElement","showLoader","loaderElement","hideLoader","formSearch","gallery","loader","btnLoadMore","handlerSearch","lightbox","SimpleLightbox","handlerLoadMore","event","iziToast","data","cardHeight"],"mappings":"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"}